<!DOCTYPE html>
<html lang={"#{ assigns[:lang] || "es" }"} data-color-scheme={"#{ assigns[:head][:dark] || "dark" }"}  class={"#{ assigns[:head][:theme] || "theme_btron" }"}>
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="theme-color" content={"#{assigns[:head][:theme_color] || "#1f2937"}"}>
    <%= if assigns.conn.assigns[:head][:meta_raw] != nil do %>
      <%= raw assigns.conn.assigns[:head][:meta_raw] %>
    <% end %>
    <script>
      if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
        document.documentElement.setAttribute("data-color-scheme", "dark");
      } else {
        document.documentElement.setAttribute("data-color-scheme", "light");
        document.documentElement.classList.remove('dark')
      }
    </script>
    <%= csrf_meta_tag() %>
    <%= render "patrials/_head_meta.html", conn: @conn, assigns: assigns  %>
    <%= live_title_tag assigns[:page_title] || assigns[:head][:title] || "KajoolyTemplateTailwind", suffix: assigns[:head][:suffix] || " Â· Kajooly Teams" %>
    <%= render "patrials/_head_css_scripts.html", conn: @conn, assigns: assigns  %>
  </head>
  <body>
  <div class="h-screen w-screen bg-gray-200 dark:bg-gray-800 text-gray-400 dark:text-gray-500 change_ps_class_stop_one flex flex-col justify-center items-center absolute animate-ease-in-out" id="splash_screen" style="z-index: 9999;">

    <div class="mb-8 h-8 w-8">
      <%= if assigns.conn.assigns.company[:isotipo_url] != nil do %>
          <img src={Routes.static_path(@conn, assigns.conn.assigns.company[:isotipo_url])} style="margin: auto; height: 98%;"/>
      <% else %>
          <%= raw assigns.conn.assigns.company.isotipo %>
      <% end  %>
    </div>

    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12 mb-8 animate-spin text-yellow-300 dark:text-yellow-600">
      <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
    </svg>

    <div>Cargando...</div>
  </div>
    <div 
      class="flex bg-gray-100 text-gray-600 dark:bg-gray-800 h-screen overflow-hidden" 
      x-data={"{ isSidebarExpanded: $persist(#{assigns["default_ui"]["isSidebarExpanded"]||"false"}).as('isSidebarExpanded') , isCompactMode: $persist(#{assigns["default_ui"]["isCompactMode"]||"false"}).as('isCompactMode') , isLiquidPage: $persist(#{assigns["default_ui"]["isLiquidPage"]||"false"}).as('isLiquidPage') }"}>
      <%= if !assigns.conn.assigns[:blank_page] do  %>
      <%= render "patrials/_left_menu.html", conn: @conn, assigns: assigns %>
        <div class="flex-1 flex flex-col">
          <%= render "patrials/_body_header.html", conn: @conn, assigns: assigns %>
          <div class="flex-1 p-1 md:p-4 h-full overflow-auto dark:bg-gray-900 dark:text-gray-300">
            <main class=" h-full w-full" >
              <%= @inner_content %>
              <%= render "patrials/_cookies.html", conn: @conn, assigns: assigns  %>
              <%= render "patrials/_footer.html", conn: @conn, assigns: assigns  %>
            </main>
          </div>
        </div>
        <% else %>
          <main class=" h-full w-full" >
            <%= @inner_content %>
            <%= render "patrials/_cookies.html", conn: @conn, assigns: assigns  %>
            <%= render "patrials/_footer.html", conn: @conn, assigns: assigns  %>
          </main>
        <% end %>
    </div>
    <script src="https://unpkg.com/flowbite@1.4.7/dist/flowbite.js"></script>

    <%= if assigns.conn.assigns.head[:js_raw] != nil do %>
      <%= raw assigns.conn.assigns.head[:js_raw] %>
    <% end %>
  </body>
</html>
